<!DOCTYPE html>
<html lang="en">
<!-- Previous head and style sections remain the same -->
<head>
  <!-- All previous styles remain the same -->
  <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.0/dist/mindar-image-aframe.prod.js"></script>
  <script>
    AFRAME.registerComponent('transparent-video', {
      init: function () {
        const mesh = this.el.getObject3D('mesh');
        const videoEl = this.el.getAttribute('material').src;

        // Auto-adjust video plane size based on video dimensions
        videoEl.addEventListener('loadedmetadata', () => {
          const videoRatio = videoEl.videoWidth / videoEl.videoHeight;
          const videoId = videoEl.id;
          const baseScale = videoId === 'vid2' ? 2.2 : 1.4; // Larger base scale for second video
          
          if (videoRatio >= 1) {
            // Landscape or square video
            this.el.setAttribute('width', baseScale);
            this.el.setAttribute('height', baseScale / videoRatio);
          } else {
            // Portrait video
            this.el.setAttribute('width', baseScale * videoRatio);
            this.el.setAttribute('height', baseScale);
          }
          
          console.log(`Video ${videoId} dimensions:`, videoEl.videoWidth, videoEl.videoHeight);
          console.log(`Set plane dimensions:`, this.el.getAttribute('width'), this.el.getAttribute('height'));
        });

        const vertexShader = `
          varying vec2 vUv;
          void main() {
            vUv = uv;
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
        `;

        const fragmentShader = `
          varying vec2 vUv;
          uniform sampler2D map;
          void main() {
            vec4 color = texture2D(map, vUv);
            float edgeFactor = smoothstep(0.0, 0.1, vUv.x) * smoothstep(1.0, 0.9, vUv.x) * 
                             smoothstep(0.0, 0.1, vUv.y) * smoothstep(1.0, 0.9, vUv.y);
            gl_FragColor = vec4(color.rgb, color.a * edgeFactor);
          }
        `;

        this.shaderMaterial = new THREE.ShaderMaterial({
          uniforms: {
            map: { value: null }
          },
          vertexShader: vertexShader,
          fragmentShader: fragmentShader,
          transparent: true
        });

        videoEl.addEventListener('playing', () => {
          const videoTexture = new THREE.VideoTexture(videoEl);
          this.shaderMaterial.uniforms.map.value = videoTexture;
          mesh.material = this.shaderMaterial;
        });
      }
    });

    // Rest of your JavaScript remains the same until the scene definition
  </script>
</head>
<body>
  <div id="loading-screen"></div>

  <div id="ar-scene">
    <a-scene
      mindar-image="imageTargetSrc: ./targets.mind; filterMinCF:0.0001; filterBeta:0.001"
      vr-mode-ui="enabled: false"
      device-orientation-permission-ui="enabled: false"
    >
      <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>
      <a-assets>
        <video
          id="vid1"
          src="assets/asset.mp4"
          preload="auto"
          loop
          crossorigin
          webkit-playsinline
          playsinline
        ></video>
        <video
          id="vid2"
          src="assets/asset2.mp4"
          preload="auto"
          loop
          crossorigin
          webkit-playsinline
          playsinline
        ></video>
      </a-assets>
      
      <!-- Videos without hardcoded dimensions -->
      <a-entity mindar-image-target="targetIndex: 0" target-index="0">
        <a-plane 
          position="0 0 0" 
          rotation="0 0 0" 
          material="src: #vid2; transparent: true"
          transparent-video
        ></a-plane>
      </a-entity>
      
      <a-entity mindar-image-target="targetIndex: 1" target-index="1">
        <a-plane 
          position="0 0 0" 
          rotation="0 0 0" 
          material="src: #vid1; transparent: true"
          transparent-video
        ></a-plane>
      </a-entity>
    </a-scene>
  </div>
  <div id="playButton" class="play-button"></div>
</body>
</html>
